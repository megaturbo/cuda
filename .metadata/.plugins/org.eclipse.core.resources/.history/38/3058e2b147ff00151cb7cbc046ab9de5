#include "RayTracingProvider.h"

#include "RayTracing.h"

#include "MathTools.h"

#include "ImageAnimable_GPU.h"
#include "DomaineMath_GPU.h"
using namespace gpu;

/**
 * Override
 */
Animable_I<uchar4>* RayTracingProvider::createAnimable(void)
{
	// Animation;
	float dt = 2 * PI / 800;

	// Dimension
	int dw = 16 * 60 * 2;
	int dh = 16 * 60;

	dim3 dg = dim3(32, 2, 1);  		// disons a optimiser, depend du gpu
	dim3 db = dim3(16, 16, 1);   	// disons a optimiser, depend du gpu
	Grid grid(dg, db);

	return new RayTracing(grid, dw, dh, dt);
	return 0;
}

/**
 * Override
 */
Image_I* RayTracingProvider::createImageGL(void)
{
	ColorRGB_01 colorTexte(0, 0, 0); // black
	return new ImageAnimable_RGBA_uchar4(createAnimable(), colorTexte);
}
